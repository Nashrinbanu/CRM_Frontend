<div class="p-3 sm:p-8">
  <div class=" p-3">
    <div class=" flex items-center text-xl sm:text-2xl font-semibold">
      <span class="cursor-pointer" (click)="goToListPage()">
        <img src="../../../../assets/lead/back-button.png" alt="Back">
      </span>
      <span class="ml-2 mb-2">{{name}} Leads</span>
    </div>
  </div>
</div>
<div
  class="min-h-screen mx-8 px-4 py-6 sm:px-6 lg:px-8 xl:px-10
         bg-gradient-to-b from-white/50 to-white/45
         border border-white backdrop-blur-md shadow-lg rounded-2xl">

  <mat-tab-group #tabGroup class=" mt-1" [(selectedIndex)]="selectedTabIndex" (selectedIndexChange)="onTabChange($event, tabgroup)" #tabgroup mat-align-tabs="start"
    mat-stretch-tabs="false">
    <mat-tab (click)="goToNextTab(tabgroup, 1)">
      <ng-template mat-tab-label>
        <span [ngClass]="tabGroup.selectedIndex === 0 ? 'text-lg font-semibold' : 'text-sm font-normal'">Company
          Details</span>
      </ng-template>
      <form [formGroup]="leadForm" class="form-content">
        <div class="m-2">
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mt-3">
            <div>
              <label class="block text-sm font-medium text-gray-800">Company Name <span
                  class="text-red-500">*</span></label>
              <input type="text" formControlName="companyName"
                class="mt-2 w-full bg-transparent border border-gray-800 rounded-full p-3 placeholder-gray-500 text-sm focus:ring-gray-900 focus:outline-none focus:border-black"
                placeholder="Enter Company Name" (keypress)="allowOnlyLetters($event)" (paste)="blockPaste($event)" />
              <div
                *ngIf="leadForm.get('companyName')?.invalid && (leadForm.get('companyName')?.dirty || leadForm.get('companyName')?.touched || submitted)"
                class="text-xs mt-2 text-red-500">
                <span *ngIf="leadForm.get('companyName')?.errors?.['required']">
                  Company name is required.
                </span>
                <span *ngIf="leadForm.get('companyName')?.errors?.['pattern']">
                  Only letters and spaces are allowed.
                </span>
              </div>
            </div>
            <div class="relative w-full">
              <label class="block text-sm font-medium text-gray-800">Industry Type <span
                  class="text-red-500">*</span></label>
              <div
                class="mt-2 w-full bg-transparent border justify-between  placeholder-gray-500 items-center  border-gray-800 flex rounded-full pl-3.5 pr-3.5 pt-[0.580rem] pb-[0.580rem] text-sm focus:ring-gray-900 focus:outline-none focus:border-black"
                (click)="showIndustryDropdown = !showIndustryDropdown">
                <span [ngClass]="{ 'text-gray-500': !selectedIndustry, 'text-black': selectedIndustry }">
                  {{ selectedIndustry || 'Select Industry Type' }}
                </span>
                <div class="h-8 w-8 flex items-center justify-center bg-white/80 rounded-full  border border-white">
                  <svg class="h-4 w-4 text-gray-600 transition-transform duration-200"
                    [ngClass]="{'rotate-180': showIndustryDropdown}" xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd"
                      d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                      clip-rule="evenodd" />
                  </svg>
                </div>
              </div>
              <div *ngIf="showIndustryDropdown" class="absolute top-full left-0 w-full bg-gradient-to-b from-gray-100 to-white shadow-lg rounded-2xl  
                         max-h-[200px] overflow-y-auto custom-scrollbar z-50 p-1 mt-1 border border-white">
                <div *ngFor="let type of industryTypes" (click)="selectIndustry(type)" class="px-4 py-3 cursor-pointer text-sm rounded-2xl mx-2 my-1 
                           hover:bg-black hover:text-white">
                  {{ type }}
                </div>
              </div>
              <div
                *ngIf="leadForm.get('industryType')?.invalid && (leadForm.get('industryType')?.dirty || leadForm.get('industryType')?.touched || submitted)"
                class="text-xs mt-2 text-red-500">
                Industry is required.
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-800">Source</label>
              <input type="text" formControlName="source"
                class="mt-2 w-full bg-transparent border border-gray-800 rounded-full p-3 placeholder-gray-500 text-sm focus:ring-gray-900 focus:outline-none focus:border-black"
                placeholder="Enter Source" />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-800">Phone <span class="text-red-500">*</span></label>
              <input type="text" formControlName="phone"
                class="mt-2 w-full bg-transparent border border-gray-800 rounded-full p-3 placeholder-gray-500 text-sm focus:ring-gray-900 focus:outline-none focus:border-black"
                placeholder="Enter Phone" minlength="10" maxlength="10" (keypress)="allowOnlyValidPhoneDigits($event)"
                (paste)="blockInvalidPhonePaste($event)" />
              <div
                *ngIf="leadForm.get('phone')?.invalid && (leadForm.get('phone')?.dirty || leadForm.get('phone')?.touched || submitted)"
                class="text-xs mt-2 text-red-500">
                <span *ngIf="leadForm.get('phone')?.errors?.['required']">Phone number is required.</span>
                <span *ngIf="leadForm.get('phone')?.errors?.['pattern']">Must be 10 digits and start with 6, 7, 8, or
                  9.</span>
              </div>
            </div>
            <div class="relative w-full">
              <label class="block text-sm font-medium text-gray-800">Country</label>
              <div
                class="mt-2 w-full bg-transparent border border-gray-800 flex justify-between items-center 
                            rounded-full pl-3.5 pr-3.5 pt-[0.580rem] pb-[0.580rem] text-sm focus:ring-gray-900 focus:outline-none focus:border-black cursor-pointer relative">

                <input type="text" [formControl]="countryFilterCtrl"
                  class="w-full bg-transparent border-none outline-none placeholder-gray-500"
                  placeholder="Select Country" (focus)="showCountryDropdown = true"
                  (click)="$event.stopPropagation()" />

                <div
                  class="h-8 w-9 flex items-center justify-center bg-white rounded-full  border border-white cursor-pointer"
                  (click)="showCountryDropdown = !showCountryDropdown">

                  <svg class="h-4 w-4 text-gray-600 transition-transform duration-200"
                    [ngClass]="{'rotate-180': showCountryDropdown}" xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd"
                      d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                      clip-rule="evenodd" />
                  </svg>
                </div>

              </div>

              <div *ngIf="showCountryDropdown" class="absolute left-0 w-full bg-gradient-to-b from-gray-100 to-white shadow-lg rounded-2xl  
                            max-h-[200px] overflow-y-auto custom-scrollbar z-50 p-1 mt-1">
                <div *ngIf="isLoadingCountries" class="text-sm p-2 text-gray-600">
                  <span>Loading countries...</span>
                </div>
                <div *ngFor="let country of filteredCountries | async" (click)="onCountryChange(country)"
                  class="px-4 py-2.5 cursor-pointer text-sm rounded-2xl mx-2 my-1 hover:bg-black hover:text-white">
                  {{ country.name }}
                </div>
              </div>
            </div>


            <!-- <div>
                <label class="block text-sm font-medium text-gray-800">Country</label>
                <input
                  type="text"
                  [formControl]="countryFilterCtrl"
                  class="mt-2 w-full bg-transparent border border-gray-800 rounded-full p-3 placeholder-gray-500 text-sm focus:ring-gray-900 focus:outline-none focus:border-black"
                  placeholder="Type to search"
                />
                <div *ngIf="isLoadingCountries" class="text-sm">
                  <span>Loading countries...</span>
                </div>
                <div *ngFor="let country of filteredCountries | async" (click)="onCountryChange(country)" class="text-sm">
                  {{ country.name }}
                </div>
              </div> -->
            <div class="relative w-full">
              <label class="block text-sm font-medium text-gray-800">State</label>
              <div
                class="mt-2 w-full bg-transparent border border-gray-800 flex justify-between items-center 
                        rounded-full pl-3.5 pr-3.5 pt-[0.580rem] pb-[0.580rem] text-sm focus:ring-gray-900 focus:outline-none focus:border-black cursor-pointer"
                (click)="toggleStateDropdown()">

                <input type="text" [formControl]="stateFilterCtrl"
                  class="bg-transparent w-full outline-none  placeholder-gray-500 cursor-pointer" placeholder="Select State"
                  (focus)="showStateDropdown = true" (click)="$event.stopPropagation()" />


                <div
                  class="h-8 w-9 flex items-center justify-center bg-white rounded-full  border border-white cursor-pointer">

                  <svg class="h-4 w-4 text-gray-600 transition-transform duration-200"
                    [ngClass]="{'rotate-180': showStateDropdown}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                    fill="currentColor">
                    <path fill-rule="evenodd"
                      d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                      clip-rule="evenodd" />
                  </svg>
                </div>
              </div>

              <div *ngIf="showStateDropdown" class="absolute left-0 w-full bg-gradient-to-b from-gray-100 to-white shadow-lg rounded-2xl  
                            max-h-[200px] overflow-y-auto custom-scrollbar z-50 p-1 mt-1">
                <div *ngIf="isLoadingStates" class="text-sm p-2 text-gray-600">
                  <span>Loading states...</span>
                </div>
                <div *ngFor="let state of filteredStates | async" (click)="onStateChange(state)"
                  class="px-4 py-3 cursor-pointer text-sm rounded-2xl mx-2 my-1 hover:bg-black hover:text-white">
                  {{ state.name }}
                </div>
              </div>
            </div>


            <div class="relative w-full">
              <label class="block text-sm font-medium text-gray-800">City</label>
              <div
                class="mt-2 w-full bg-transparent border border-gray-800 flex justify-between items-center 
                        rounded-full pl-3.5 pr-3.5 pt-[0.580rem] pb-[0.580rem] text-sm focus:ring-gray-900 focus:outline-none focus:border-black cursor-pointer"
                (click)="toggleCityDropdown()">

                <input type="text" [formControl]="cityFilterCtrl"
                  class="bg-transparent w-full outline-none cursor-pointer  placeholder-gray-500" placeholder="Select City"
                  (focus)="showCityDropdown = true" (click)="$event.stopPropagation()" />
                <div
                  class="h-8 w-9 flex items-center justify-center bg-white rounded-full  border border-white cursor-pointer">

                  <svg class="h-4 w-4 text-gray-600 transition-transform duration-200"
                    [ngClass]="{'rotate-180': showCityDropdown}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                    fill="currentColor">
                    <path fill-rule="evenodd"
                      d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                      clip-rule="evenodd" />
                  </svg>
                </div>
              </div>
              <div *ngIf="showCityDropdown" class="absolute left-0 w-full bg-gradient-to-b from-gray-100 to-white shadow-lg rounded-2xl  
                            max-h-[200px] overflow-y-auto custom-scrollbar z-50 p-1 mt-1 ">
                <div *ngIf="isLoadingCities" class="text-sm p-2 text-gray-600">
                  <span>Loading cities...</span>
                </div>

                <div *ngFor="let city of filteredCities | async" (click)="onCityChange(city)"
                  class="px-4 py-3 cursor-pointer text-sm rounded-2xl mx-2 my-1 hover:bg-black hover:text-white">
                  {{ city.name }}
                </div>
              </div>
            </div>

            <div class="relative w-full">
              <label class="block text-sm font-medium text-gray-800">
                Status <span class="text-red-500">*</span>
              </label>
              <div
                class="mt-2 w-full bg-transparent border border-gray-800 flex justify-between items-center 
                            rounded-full pl-3.5 pr-3.5 pt-[0.580rem] pb-[0.580rem] text-sm focus:ring-gray-900 focus:outline-none focus:border-black cursor-pointer"
                (click)="showStatusDropdown = !showStatusDropdown">
                <span [ngClass]="{ 'text-gray-500': !selectedStatus, 'text-gray-700': selectedStatus }">
                  {{ selectedStatus || 'Select Status' }}
                </span>
                <div class="h-8 w-8 flex items-center justify-center bg-white/80 rounded-full  border border-white">
                  <svg class="h-4 w-4 text-gray-600 transition-transform duration-200"
                    [ngClass]="{'rotate-180': showStatusDropdown}" xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd"
                      d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                      clip-rule="evenodd" />
                  </svg>
                </div>


              </div>
              <div *ngIf="showStatusDropdown" class="absolute left-0 w-full bg-gradient-to-b from-gray-100 to-white shadow-lg rounded-2xl  
                            max-h-[200px] overflow-y-auto custom-scrollbar z-50 p-1 mt-1">
                <div *ngFor="let status of leadStatuses" (click)="selectStatus(status)"
                  class="px-4 py-3 cursor-pointer text-sm rounded-2xl mx-2 my-1 hover:bg-black hover:text-white">
                  {{ status }}
                </div>
              </div>
              <div
                *ngIf="leadForm.get('leadStatus')?.invalid && (leadForm.get('leadStatus')?.dirty || leadForm.get('leadStatus')?.touched || submitted)"
                class="text-xs mt-2 text-red-500">
                Status is required.
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-800">Pincode</label>
              <input type="text" formControlName="pincode"
                class="mt-2 w-full bg-transparent border border-gray-800 rounded-full p-3 placeholder-gray-500 text-sm focus:ring-gray-900 focus:outline-none focus:border-black"
                placeholder="Enter Pincode" (input)="onPhoneInput($event)" minlength="6" maxlength="6" />
              <div
                *ngIf="leadForm.get('pincode')?.invalid && (leadForm.get('pincode')?.dirty || leadForm.get('pincode')?.touched || submitted)"
                class="text-xs mt-2 text-red-500">
                Pincode is required and must be 6 digits long.
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-800">Email-ID <span
                  class="text-red-500">*</span></label>
              <input type="email" formControlName="email" (input)="toLowercaseEmail()"
                class="mt-2 w-full bg-transparent border border-gray-800 rounded-full p-3 placeholder-gray-500 text-sm focus:ring-gray-900 focus:outline-none focus:border-black"
                placeholder="Enter Email-ID" />
              <div
                *ngIf="leadForm.get('email')?.invalid && (leadForm.get('email')?.dirty || leadForm.get('email')?.touched || submitted)"
                class="text-xs mt-2 text-red-500">
                Please enter a valid email address.
              </div>

            </div>
            <div>
              <label class="block text-sm font-medium text-gray-800">Company Website <span
                  class="text-red-500">*</span></label>
              <input type="text" formControlName="website" (input)="toLowercaseEmail()"
                class="mt-2 w-full bg-transparent border border-gray-900 rounded-full p-3 placeholder-gray-500 text-sm focus:ring-gray-900 focus:outline-none focus:border-black"
                placeholder="Enter Company Website" />
              <div
                *ngIf="leadForm.get('website')?.invalid && (leadForm.get('website')?.dirty || leadForm.get('website')?.touched || submitted)"
                class="text-xs mt-2 text-red-500">
                Enter a valid website URL (e.g., https://www.example.com).
              </div>
            </div>
            <div class="col-span-2 sm:col-span-2 lg:col-span-2">
              <label class="block text-sm font-medium text-gray-800">Address</label>
              <textarea formControlName="address" rows="3"
                class="mt-2 w-full bg-transparent border border-gray-800 rounded-2xl p-3 placeholder-gray-500 text-sm focus:ring-gray-900 focus:outline-none focus:border-black"
                placeholder="Enter Full Address" maxlength="250"></textarea>
            </div>
          </div>
          <div class="flex justify-end mt-8 sm:mt-12">
            <button type="button"
              class="text-black px-6 py-2 rounded-full text-sm font-medium mr-2 bg-[#ffff] transition duration-300"
              (click)="goToListPage()">
              Cancel
            </button>
            <button type="submit" (click)="validateCompanyDetails(tabgroup)"
              class="text-white px-6 py-2 rounded-full text-sm font-medium bg-[#000] transition duration-300">
              Next
            </button>
          </div>
        </div>
      </form>
    </mat-tab>
    <mat-tab [disabled]="!isContactTabEnabled">
      <ng-template mat-tab-label>
        <span   [ngClass]="tabGroup.selectedIndex === 1 ? 'text-lg font-semibold' : 'text-sm font-normal'">
          Contact Details
        </span>
      </ng-template>
      <form [formGroup]="leadForm">
        <div class="mt-4 mb-5" formArrayName="contacts">
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"
            *ngFor="let contact of contacts.controls; let i = index" [formGroupName]="i">
            <div>
              <label class="block text-sm font-medium mt-4 text-gray-800">
                Contact Person Name <span class="text-red-500">*</span>
              </label>
              <input type="text" formControlName="contactName"
                class="mt-2 w-full bg-transparent border border-gray-800 rounded-full p-3 placeholder-gray-500 text-sm focus:ring-gray-900 focus:outline-none focus:border-black"
                placeholder="Enter Contact Person Name" (keydown)="preventNonAlphabets($event)" />
              <div *ngIf="
                  (contact.get('contactName')?.invalid &&
                    (contact.get('contactName')?.touched || submitted))
                " class="text-xs mt-2 text-red-500">
                Contact name is required.
              </div>
              <div *ngIf="
                  contact.get('contactName')?.hasError('pattern') &&
                  (contact.get('contactName')?.touched || submitted)
                " class="text-xs mt-2 text-red-500">
                Only alphabets and spaces between words are allowed.
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mt-4 text-gray-800">
                Designation
              </label>
              <input type="text" formControlName="designation"
                class="mt-2 w-full bg-transparent border border-gray-800 rounded-full p-3 placeholder-gray-500 text-sm focus:ring-gray-900 focus:outline-none focus:border-black"
                placeholder="Enter Designation" />
            </div>
            <div>
              <label class="block text-sm font-medium mt-4 text-gray-800">
                Email-ID <span class="text-red-500">*</span>
              </label>
              <input type="email" formControlName="contactEmail" (input)="toLowercaseEmail()"
                class="mt-2 w-full bg-transparent border border-gray-800 rounded-full p-3 placeholder-gray-500 text-sm focus:ring-gray-900 focus:outline-none focus:border-black"
                placeholder="Enter Email-ID" maxlength="40" minlength="15" />
              <div *ngIf="
                  (contact.get('contactEmail')?.invalid &&
                    (contact.get('contactEmail')?.touched || submitted))
                " class="text-xs mt-2 text-red-500">
                Email is required.
              </div>
              <div *ngIf="
                  contact.get('contactEmail')?.hasError('email') &&
                  (contact.get('contactEmail')?.touched || submitted)
                " class="text-xs mt-2 text-red-500">
                Please enter a valid email address. Ex: nameexample.com
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mt-4 text-gray-800">
                Alternative Email-ID
              </label>
              <input type="email" formControlName="alternateEmail" (input)="toLowercaseEmail()"
                class="mt-2 w-full bg-transparent border border-gray-800 rounded-full p-3 placeholder-gray-500 text-sm focus:ring-gray-900 focus:outline-none focus:border-black"
                placeholder="Enter Alternative Email-ID" maxlength="40" minlength="15" />
            </div>
            <div>
              <label class="block text-sm font-medium mt-4 text-gray-800">
                Mobile Number <span class="text-red-500">*</span>
              </label>
              <input type="tel" formControlName="mobile"
                class="mt-2 w-full bg-transparent border border-gray-800 rounded-full p-3 placeholder-gray-500 text-sm focus:ring-gray-900 focus:outline-none focus:border-black"
                placeholder="Enter Mobile Number" (input)="onPhoneInput($event)" minlength="10" maxlength="10"
                (keypress)="allowOnlyValidPhoneDigits($event)" (paste)="blockInvalidPhonePaste($event)" />
              <!-- <div
                *ngIf="
                  (contact.get('mobile')?.invalid &&
                    (contact.get('mobile')?.touched || submitted))
                "
                class="text-xs mt-2 text-red-500"
              >
                Mobile number is required.
              </div>

              <div
                *ngIf="
                  contact.get('mobile')?.hasError('pattern') &&
                  (contact.get('mobile')?.touched || submitted)
                "
                class="text-xs mt-2 text-red-500"
              >
                Mobile number must be exactly 10 digits.
              </div> -->

              <div
                *ngIf="contact.get('mobile')?.invalid && (contact.get('mobile')?.dirty || contact.get('mobile')?.touched || submitted)"
                class="text-xs mt-2 text-red-500">
                <span *ngIf="contact.get('mobile')?.errors?.['required']">mobile number is required.</span>
                <span *ngIf="contact.get('mobile')?.errors?.['pattern']">Must be 10 digits and start with 6, 7, 8, or
                  9.</span>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mt-4 text-gray-800">
                Alternative Mobile Number
              </label>
              <input type="tel" formControlName="alternateMobile"
                class="mt-2 w-full bg-transparent border border-gray-800 rounded-full p-3 placeholder-gray-500 text-sm focus:ring-gray-900 focus:outline-none focus:border-black"
                placeholder="Enter Alternative Mobile Number" (input)="onPhoneInput($event)" minlength="10"
                maxlength="10" />
              <div *ngIf="
                  contact.get('alternateMobile')?.hasError('pattern') &&
                  (contact.get('alternateMobile')?.touched || submitted)
                " class="text-xs mt-2 text-red-500">
                Mobile number must be exactly 10 digits.
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mt-4 text-gray-800">
                Status <span class="text-red-500">*</span>
              </label>
              <div class="relative">
                <div
                  class="mt-2 w-full bg-transparent border border-gray-800 rounded-full px-3 py-2 flex justify-between items-center cursor-pointer"
                  (click)="toggleContactStatusDropdown(i)">
                  <span [ngClass]="{ 'text-gray-500': !selectedContactStatuses[i], 'text-gray-700': selectedContactStatuses[i] }">
                    {{ selectedContactStatuses[i] || 'Select Status' }}
                  </span>
                  
                  <div class="h-8 w-8 flex items-center justify-center bg-white/80 rounded-full border border-white">
                    <svg class="h-4 w-4 text-gray-600 transition-transform duration-200"
                      [ngClass]="{'rotate-180': showContactStatusDropdown[i]}" xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 20 20" fill="currentColor">
                      <path fill-rule="evenodd"
                        d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                        clip-rule="evenodd" />
                    </svg>

                  </div>
                </div>
                <div *ngIf="showContactStatusDropdown[i]"
                  class="absolute left-0 w-full bg-gradient-to-b from-gray-100 to-white shadow-lg rounded-2xl max-h-[200px] overflow-y-auto z-50 p-1 mt-1 border border-white">
                  <div *ngFor="let status of contactStatus" (click)="selectContactStatus(status,i)"
                    class="px-4 py-3 cursor-pointer text-sm rounded-2xl mx-2 my-1 hover:bg-black hover:text-white">
                    {{ status | titlecase }}
                  </div>
                </div>
              </div>
              <div *ngIf="
                  leadForm.get('status')?.invalid &&
                  (leadForm.get('status')?.dirty ||
                    leadForm.get('status')?.touched ||
                    submitted)
                " class="text-xs mt-2 text-red-500">
                Status is required.
              </div>
            </div>

            <div class="col-span-full">
              <label class="block text-sm font-medium mt-4 text-gray-800">
                Comments
              </label>
              <textarea formControlName="comments"
                class="mt-2 w-full bg-transparent border border-gray-800 rounded-2xl p-3 placeholder-gray-500 text-sm focus:ring-gray-900 focus:outline-none focus:border-black"
                rows="3" placeholder="Enter Comments" maxlength="500"></textarea>
            </div>
            <div class="col-span-full flex justify-end items-center">
              <button *ngIf="contacts.length > 1" type="button" (click)="removeContact(i)"
                class="text-red-500 hover:text-red-700 mr-4">
                <img src="../../../../assets/lead/Delete (1).svg" alt="Delete" class="w-6 h-6" />
              </button>
              <!-- <div *ngIf="contacts.length < 3">
                <button type="button" (click)="addContact()" [disabled]="!isAllContactsValid()"
                  class="bg-black text-white px-6 py-2 rounded-full text-sm font-medium hover:bg-gray-900 disabled:bg-gray-400">
                  Add Contact
                </button>
              </div> -->
            </div>
          </div>
        </div>

        <div class="flex justify-end mt-8 sm:mt-12">
          <button type="button" (click)="goToCompanyDetails(tabgroup)"
            class="text-black px-6 py-2 rounded-full text-sm font-medium mr-2 bg-white transition duration-300">
            Previous
          </button>
          <button type="submit" (click)="onSubmit()"
            class="text-white px-6 py-2 rounded-full text-sm font-medium bg-black transition duration-300">
            Save
          </button>
        </div>
      </form>
    </mat-tab>
  </mat-tab-group>
</div>